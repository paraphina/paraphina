# Adversarial Regression Suite v1
#
# This suite was auto-generated by exp_phase_a_adversarial_search.py
# Generated at: 2025-12-24T20:15:45.769040Z
#
# Contains top failure cases discovered by adversarial search.
# These scenarios stress-test edge cases and should be run as regression.
#
# Usage:
#   cargo run --release -p paraphina --bin sim_eval -- suite scenarios/suites/adversarial_regression_v1.yaml
#

suite_id: adversarial_regression_v1
suite_version: 1

# Run each scenario twice for determinism verification
repeat_runs: 2

# Output directory for CI runs
out_dir: runs/adversarial_regression

# Failure scenarios discovered by adversarial search
scenarios:
  # Rank 1: score=274.19, kill_ci_upper=0.278
  - id: smoke_balanced_0
    seed: 42
    profile: balanced
    env_overrides:
      PARAPHINA_RISK_PROFILE: balanced
      PARAPHINA_VOL_REF: "0.2000"
      PARAPHINA_MM_SIZE_ETA: "0.5000"
      PARAPHINA_INIT_Q_TAO: "-30.00"
      PARAPHINA_DAILY_LOSS_LIMIT: "1000.00"
    adversarial_params:
      vol_multiplier: 2.0000
      jump_intensity: 1.0000
      spread_multiplier: 2.0000
      latency_multiplier: 1.5000
      depth_collapse_factor: 0.5000
      venue_outage_prob: 0.0000

  # Rank 2: score=273.64, kill_ci_upper=0.278
  - id: smoke_aggressive_2
    seed: 44
    profile: aggressive
    env_overrides:
      PARAPHINA_RISK_PROFILE: aggressive
      PARAPHINA_VOL_REF: "0.2000"
      PARAPHINA_MM_SIZE_ETA: "0.5000"
      PARAPHINA_INIT_Q_TAO: "30.00"
      PARAPHINA_DAILY_LOSS_LIMIT: "1000.00"
    adversarial_params:
      vol_multiplier: 2.0000
      jump_intensity: 1.0000
      spread_multiplier: 2.0000
      latency_multiplier: 1.5000
      depth_collapse_factor: 0.5000
      venue_outage_prob: 0.0000

  # Rank 3: score=270.49, kill_ci_upper=0.278
  - id: smoke_conservative_1
    seed: 43
    profile: conservative
    env_overrides:
      PARAPHINA_RISK_PROFILE: conservative
      PARAPHINA_VOL_REF: "0.2000"
      PARAPHINA_MM_SIZE_ETA: "0.5000"
      PARAPHINA_INIT_Q_TAO: "0.00"
      PARAPHINA_DAILY_LOSS_LIMIT: "1000.00"
    adversarial_params:
      vol_multiplier: 2.0000
      jump_intensity: 1.0000
      spread_multiplier: 2.0000
      latency_multiplier: 1.5000
      depth_collapse_factor: 0.5000
      venue_outage_prob: 0.0000

# Invariants to check after each scenario
invariants:
  # Evidence packs must verify
  evidence_pack_valid: true
  # Allow kill_switch in adversarial scenarios (we're stress-testing)
  expect_kill_switch: allowed